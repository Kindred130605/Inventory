import{a as u}from"./axiosApi-BEJtNk7V.js";import{_ as y,o as m,z as _,c as i,n as l,t as d,q as o,C as I,l as V,F as b,x as C,y as x,v as L}from"./index-BELodwLw.js";import{V as T,a as w,b as q,c as S}from"./VToolbar-B1laroeX.js";import{V as p}from"./VTextField-zILkgR5J.js";import{V as f,f as h,a as D,e as g,b as E,d as M}from"./VGrid-D5UChQUz.js";import{V as B}from"./VSpacer-DDCjRvbr.js";const F={data(){return{search:"",itemsList:[],headers:[{title:"Item Name",key:"items_name"},{title:"Item Quantity",key:"items_quantity"}],dialog:!1,editMode:!1,editedItem:{id:null,items_name:"",items_quantity:0}}},mounted(){this.getItems()},methods:{async getItems(){try{const e=await u.get("/items");this.itemsList=e.data,console.log(this.itemsList)}catch(e){console.error("Error fetching items:",e)}},openDialog(){this.editMode=!1,this.editedItem={id:null,items_name:"",items_quantity:0},this.dialog=!0},editItem(e){this.editMode=!0,this.editedItem={...e},this.dialog=!0},saveItem(){this.editMode?u.post(`/items/update/${this.editedItem.id}`,this.editedItem).then(e=>{let t=this.itemsList.findIndex(n=>n.id===this.editedItem.id);t!==-1&&(this.itemsList.splice(t,1,e.data),this.dialog=!1)}).catch(e=>{console.error("Error updating item:",e)}):u.post("/items/add",this.editedItem).then(e=>{const t=e.data;this.itemsList.push(t),this.dialog=!1}).catch(e=>{console.error("Error adding item:",e)})},deleteItem(e){u.post(`/items/delete/${e.id}`).then(t=>{let n=this.itemsList.findIndex(c=>c.id===e.id);n!==-1?this.itemsList.splice(n,1):console.error("Item not found in itemList")}).catch(t=>{console.error("Error deleting item:",t)})}},computed:{filteredItems(){return this.itemsList.filter(e=>e.items_name.toLowerCase().includes(this.search.toLowerCase())||e.items_quantity.toString().includes(this.search))}}};function N(e,t,n,c,a,r){return m(),_(b,null,[i(q,{search:a.search,headers:a.headers,items:a.itemsList,"sort-by":[{key:"items_name",order:"asc"}]},{top:l(()=>[i(T,{flat:""},{default:l(()=>[i(w,{class:"text-h6 font-weight-black",style:{color:"#2F3F64"}},{default:l(()=>[d("Items")]),_:1}),i(p,{modelValue:a.search,"onUpdate:modelValue":t[0]||(t[0]=s=>a.search=s),class:"w-auto mr-4",label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined",dense:"","hide-details":"","single-line":""},null,8,["modelValue"]),i(f,{color:"primary",variant:"flat",dark:"",onClick:t[1]||(t[1]=s=>r.openDialog())},{default:l(()=>[i(h,{left:""},{default:l(()=>[d("mdi-plus")]),_:1}),d(" ADD ITEM ")]),_:1})]),_:1})]),item:l(({item:s})=>[(m(),_("tr",{key:s.id},[o("td",null,I(s.items_name),1),o("td",null,I(s.items_quantity),1),o("td",null,[i(h,{onClick:v=>r.editItem(s)},{default:l(()=>[d("mdi-pencil")]),_:2},1032,["onClick"]),i(h,{onClick:v=>r.deleteItem(s)},{default:l(()=>[d("mdi-delete")]),_:2},1032,["onClick"])])]))]),_:1},8,["search","headers","items"]),i(S,{modelValue:a.dialog,"onUpdate:modelValue":t[6]||(t[6]=s=>a.dialog=s),"max-width":"600"},{default:l(()=>[i(D,null,{default:l(()=>[a.editMode?(m(),V(g,{key:0},{default:l(()=>[d("Edit Item")]),_:1})):(m(),V(g,{key:1},{default:l(()=>[d("Add Item")]),_:1})),i(E,null,{default:l(()=>[i(p,{modelValue:a.editedItem.items_name,"onUpdate:modelValue":t[2]||(t[2]=s=>a.editedItem.items_name=s),label:"Item Name"},null,8,["modelValue"]),i(p,{modelValue:a.editedItem.items_quantity,"onUpdate:modelValue":t[3]||(t[3]=s=>a.editedItem.items_quantity=s),label:"Item Quantity",type:"number"},null,8,["modelValue"])]),_:1}),i(M,null,{default:l(()=>[i(B),i(f,{color:"blue darken-1",text:"",onClick:t[4]||(t[4]=s=>a.dialog=!1)},{default:l(()=>[d("Cancel")]),_:1}),i(f,{color:"blue darken-1",onClick:t[5]||(t[5]=s=>r.saveItem())},{default:l(()=>[d("Save")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const U=y(F,[["render",N]]),A={components:{ItemsTable:U}},k=e=>(C("data-v-3198e15d"),e=e(),x(),e),Q=k(()=>o("div",{class:"top-container"},[o("div",{class:"studentProfile"},[o("span",{class:"material-icons"},"inventory"),o("span",{class:"text"},"Items")])],-1)),z=k(()=>o("hr",null,null,-1)),P={class:"main-content"},j={class:"student-table"};function G(e,t,n,c,a,r){const s=L("ItemsTable");return m(),_("main",null,[Q,z,o("div",P,[o("div",j,[i(s)])])])}const X=y(A,[["render",G],["__scopeId","data-v-3198e15d"]]);export{X as default};
